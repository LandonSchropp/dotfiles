#!/usr/bin/env ruby

# frozen_string_literal: true

require 'yaml'

# This script outputs the configuration for the current service in JSON (which is a little faster to
# parse than YAML).

# Grab the current service name.
service_name = `docker-compose-current-service-name`
exit 1 unless $?.success?
service_name.strip!

# Grab the current service configuration.
docker_compose_configuration = YAML.load(`docker-compose config`)
exit 1 unless $?.success?
puts docker_compose_configuration["services"][service_name].to_yaml
